<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ML Sales Prediction</title>
  <style>
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #4e73df, #1cc88a);
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
    }
    .card{
      background:#fff;
      width:420px;
      max-width:95vw;
      padding:30px;
      border-radius:16px;
      box-shadow:0 12px 30px rgba(0,0,0,.2);
    }
    h1{
      margin:0 0 6px 0;
      text-align:center;
      font-size:28px;
      color:#222;
    }
    .sub{
      text-align:center;
      color:#666;
      margin-bottom:18px;
      font-size:14px;
    }
    label{
      font-weight:bold;
      color:#333;
      display:block;
      margin-top:14px;
      margin-bottom:6px;
    }
    input, select{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:1px solid #ddd;
      outline:none;
      font-size:15px;
    }
    input:focus, select:focus{
      border-color:#4e73df;
      box-shadow:0 0 0 3px rgba(78,115,223,.15);
    }
    button{
      width:100%;
      margin-top:18px;
      padding:14px;
      border:none;
      border-radius:12px;
      background:#2e59d9;
      color:#fff;
      font-size:16px;
      cursor:pointer;
      font-weight:bold;
    }
    button:hover{ background:#2448b6; }

    #result{
      margin-top:18px;
      text-align:center;
      font-size:18px;
      font-weight:bold;
    }
    .ok{ color:#1cc88a; }
    .err{ color:#e74a3b; white-space:pre-wrap; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üìä Pr√©diction des ventes</h1>
    <div class="sub">Interface Flask + Mod√®le ML</div>

    <form id="form">
      <label>Store</label>
      <input type="number" id="Store" value="1" min="1"/>

      <label>DayOfWeek (1..7)</label>
      <input type="number" id="DayOfWeek" value="2" min="1" max="7"/>

      <label>Customers</label>
      <input type="number" id="Customers" value="500" min="0"/>

      <label>Promo (0 ou 1)</label>
      <select id="Promo">
        <option value="0">0 (No)</option>
        <option value="1">1 (Yes)</option>
      </select>

      <button type="submit">Pr√©dire</button>
    </form>

    <div id="result"></div>
  </div>

<script>
document.getElementById("form").addEventListener("submit", async function(e){
  e.preventDefault();
  const result = document.getElementById("result");
  result.className = "";
  result.textContent = "‚è≥ ...";

  try{
    const res = await fetch("/predict", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({
        Store: Number(document.getElementById("Store").value),
        DayOfWeek: Number(document.getElementById("DayOfWeek").value),
        Customers: Number(document.getElementById("Customers").value),
        Promo: Number(document.getElementById("Promo").value)
      })
    });

    const data = await res.json();

    if(!res.ok || data.error){
      result.className = "err";
      result.textContent = "‚ùå Erreur: " + (data.error || "Erreur serveur");
      return;
    }

    result.className = "ok";
    result.textContent = "üí∞ Vente pr√©dite : " + data.prediction + " ‚Ç¨";
  }catch(err){
    result.className = "err";
    result.textContent = "‚ùå Erreur: " + err;
  }
});
</script>
</body>
</html>